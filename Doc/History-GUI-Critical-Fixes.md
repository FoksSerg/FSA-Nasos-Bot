# –ò—Å—Ç–æ—Ä–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π GUI - RouterOS API

üìÖ **–ü–µ—Ä–∏–æ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –ò—é–Ω—å 2025  
üéØ **–¶–µ–ª—å:** –†–µ—à–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º RouterOS API –≤ MikrotikUploader GUI  
‚úÖ **–°—Ç–∞—Ç—É—Å:** –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞  

---

## üö® –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1Ô∏è‚É£ **–ü—Ä–æ–±–ª–µ–º–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ RouterOS API**

#### **–°–∏–º–ø—Ç–æ–º—ã:**
- GUI –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ 11 —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏–∑ 15 –≤–∏–¥–∏–º—ã—Ö –≤ Winbox
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å RouterOS –ø–æ–∫–∞–∑—ã–≤–∞–ª –≤—Å–µ 15 —Å–∫—Ä–∏–ø—Ç–æ–≤
- API –∑–∞–ø—Ä–æ—Å `/system/script/print` –≤–æ–∑–≤—Ä–∞—â–∞–ª –Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
RouterOS API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–∞–≥–∏–Ω–∞—Ü–∏—é** –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–ª—è `source` —É —Å–∫—Ä–∏–ø—Ç–æ–≤. –ö–æ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–æ–ª—å—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é "—Å—Ç—Ä–∞–Ω–∏—Ü—É" —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ–∂–∏–¥–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è.

#### **–ò—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥:**
```python
# ‚ùå –ü–†–û–ë–õ–ï–ú–ù–´–ô –∑–∞–ø—Ä–æ—Å - –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–µ source
api.write_sentence(["/system/script/print"])
response = api.read_sentence()
# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 11 —Å–∫—Ä–∏–ø—Ç–æ–≤
```

#### **–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `=.proplist` –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–ª–µ–π:
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –∑–∞–ø—Ä–æ—Å - —Ç–æ–ª—å–∫–æ ID, –∏–º—è –∏ —Å—á–µ—Ç—á–∏–∫ –∑–∞–ø—É—Å–∫–æ–≤
api.write_sentence(["/system/script/print", "=.proplist=.id,name,run-count"])
response = api.read_sentence()
# –ü–æ–ª—É—á–∞–µ–º –í–°–ï —Å–∫—Ä–∏–ø—Ç—ã –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
```

#### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å–µ 15+ —Å–∫—Ä–∏–ø—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –±–æ–ª—å—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—Å–∫–æ–≤ –≤–º–µ—Å—Ç–æ —Ä–∞–∑–º–µ—Ä–∞

---

### 2Ô∏è‚É£ **–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–≤–∏—Å–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤**

#### **–°–∏–º–ø—Ç–æ–º—ã:**
- Timeout –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –±–æ–ª—å—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ (>15KB)
- –ó–∞–≤–∏—Å–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ `verify_script_exists` –∏ `remove_script`
- –û—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
–ü—Ä–∏ –ø–æ–∏—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ –∏–º–µ–Ω–∏, RouterOS API –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–≤—Å–µ –ø–æ–ª—è –≤–∫–ª—é—á–∞—è source**. –î–ª—è –±–æ–ª—å—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ —ç—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é, –ø—Ä–∏–≤–æ–¥—è—â—É—é –∫ –∑–∞–≤–∏—Å–∞–Ω–∏—é.

#### **–ò—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥:**
```python
# ‚ùå –ü–†–û–ë–õ–ï–ú–ù–´–ô –ø–æ–∏—Å–∫ - –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è
def verify_script_exists(self, script_name):
    api.write_sentence(["/system/script/print", f"?name={script_name}"])
    # –ó–∞–≤–∏—Å–∞–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö –∏–∑-–∑–∞ —á—Ç–µ–Ω–∏—è source
```

#### **–†–µ—à–µ–Ω–∏–µ:**
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–æ–ª—è–º–∏:
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ø–æ–∏—Å–∫ - —Ç–æ–ª—å–∫–æ ID –∏ –∏–º—è
def verify_script_exists(self, script_name):
    api.write_sentence(["/system/script/print", 
                       "=.proplist=.id,name", 
                       f"?name={script_name}"])
    # –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ —á—Ç–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
```

#### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ü–æ–∏—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ –ù–µ—Ç timeout'–æ–≤ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

---

### 3Ô∏è‚É£ **–ü—Ä–æ–±–ª–µ–º–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**

#### **–°–∏–º–ø—Ç–æ–º—ã:**
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ scheduler, GUI –Ω–µ –≤–∏–¥–µ–ª –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–≤–∞–ª –æ–±—ä–µ–∫—Ç, –Ω–æ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
- –¢—Ä–µ–±–æ–≤–∞–ª–æ—Å—å —Ä—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
**–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (scheduler upload) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ RouterOS. –°—Ç–∞—Ä–æ–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ API –∫—ç—à–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

#### **–ò—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥:**
```python
# ‚ùå –ü–†–û–ë–õ–ï–ú–ù–û–ï –æ–∂–∏–¥–∞–Ω–∏–µ - —Ç—É–ø–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
def upload_large_script(self, script_name, content):
    # ... —Å–æ–∑–¥–∞–Ω–∏–µ scheduler'–∞ ...
    time.sleep(30)  # –¢—É–ø–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ - –Ω–µ –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

#### **–†–µ—à–µ–Ω–∏–µ:**
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è **Smart Reconnect** + **–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ**:
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ï –æ–∂–∏–¥–∞–Ω–∏–µ - –∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
def reconnect_for_fresh_data(self):
    """–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö"""
    try:
        self.sock.close()
    except:
        pass
    self.connect()
    self.login()

def upload_large_script(self, script_name, content):
    # ... —Å–æ–∑–¥–∞–Ω–∏–µ scheduler'–∞ ...
    
    # –ê–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
    for attempt in range(60):
        self.reconnect_for_fresh_data()
        if self.verify_script_exists(script_name):
            return True  # –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
        time.sleep(1)  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
```

#### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- ‚úÖ 50-90% —É—Å–∫–æ—Ä–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ù–µ—Ç –ª–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫ "—Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"

---

### 4Ô∏è‚É£ **–ü—Ä–æ–±–ª–µ–º–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

#### **–°–∏–º–ø—Ç–æ–º—ã:**
- –î–≤–∞ –∫–ª–∞—Å—Å–∞ `MikrotikUploader` –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ `load_router_content()` –∏ `auto_load_router_content()`
- –ù–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
–≠–≤–æ–ª—é—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–∏–≤–µ–ª–∞ –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ–¥–∞:
- `mikrotik_uploader.py` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- `mikrotik_uploader.py` - GUI –≤–µ—Ä—Å–∏—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º

#### **–†–µ—à–µ–Ω–∏–µ:**
**–ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
```bash
# –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞
rm mikrotik_uploader.py

# –ü–µ—Ä–µ–Ω–æ—Å –≤—Å–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≤ GUI –≤–µ—Ä—Å–∏—é
# –ö–ª–∞—Å—Å MikrotikUploader —Ç–µ–ø–µ—Ä—å –∂–∏–≤–µ—Ç —Ç–æ–ª—å–∫–æ –≤ GUI —Ñ–∞–π–ª–µ
```

#### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ï–¥–∏–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ GUI
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –≤ –¥–µ—Ç–∞–ª—è—Ö

### üìä **RouterOS API –ø–∞–≥–∏–Ω–∞—Ü–∏—è - –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑**

#### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—è:**
1. **–ó–∞–ø—Ä–æ—Å —Å source –ø–æ–ª–µ–º:**
   ```
   /system/script/print
   ```
   - RouterOS –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
   - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ (–æ–±—ã—á–Ω–æ ~10-15 –æ–±—ä–µ–∫—Ç–æ–≤) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç
   - –û–∂–∏–¥–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `getNextReply` –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è

2. **–ü–æ–≤–µ–¥–µ–Ω–∏–µ API –∫–ª–∏–µ–Ω—Ç–∞:**
   ```python
   # –ö–ª–∏–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –ø–µ—Ä–≤—ã–π –±–ª–æ–∫ –æ—Ç–≤–µ—Ç–∞
   response = api.read_sentence()
   # –ü–æ–ª—É—á–∞–µ—Ç !re –∑–∞–ø–∏—Å–∏ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 11 —Å–∫—Ä–∏–ø—Ç–æ–≤
   # –ù–ï –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É !done - –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã
   ```

3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
   ```python
   # –ó–∞–ø—Ä–æ—Å –±–µ–∑ –ø–æ–ª—è source
   api.write_sentence(["/system/script/print", "=.proplist=.id,name,run-count"])
   # RouterOS –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º –±–ª–æ–∫–µ
   # –ó–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è !done - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω—ã–µ
   ```

#### **–ü–æ–ª—è –≤—ã–∑—ã–≤–∞—é—â–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é:**
- `source` - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞ (–æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞)
- `comment` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–∞—Ö)
- –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ–ª–µ–π –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ–±—ä–µ–∫—Ç–æ–≤

### ‚ö° **Smart Reconnect —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è**

#### **–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
```python
def smart_operation_with_reconnect(self, operation_func, check_func, max_attempts=60):
    """
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Ç—Ä–µ–±—É—é—â–∏—Ö –æ–∂–∏–¥–∞–Ω–∏—è
    
    Args:
        operation_func: –§—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—é (—Å–æ–∑–¥–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
        check_func: –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        max_attempts: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
    """
    # –í—ã–ø–æ–ª–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é
    operation_func()
    
    # –ê–∫—Ç–∏–≤–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —Å –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
    for attempt in range(max_attempts):
        # –ü–æ–ª—É—á–∞–µ–º —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
        self.reconnect_for_fresh_data()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        if check_func():
            return True
            
        # –ö–æ—Ä–æ—Ç–∫–∞—è –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
        time.sleep(1)
    
    return False  # –¢–∞–π–º–∞—É—Ç
```

#### **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö:**
- **–°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤:** –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –≤ —Å–ø–∏—Å–∫–µ
- **–£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤:** –û–∂–∏–¥–∞–Ω–∏–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –∏–∑ —Å–ø–∏—Å–∫–∞  
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:** –û–∂–∏–¥–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### üóëÔ∏è **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —É–¥–∞–ª–µ–Ω–∏—è**

#### **–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Ç–æ–¥—ã - –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
# ‚ùå –ó–∞–≤–∏—Å–∞–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
def remove_script(self, script_name):
    # –ü–æ–∏—Å–∫ —Å –ø–æ–ª–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
    api.write_sentence(["/system/script/print", f"?name={script_name}"])
    # –ó–ê–í–ò–°–ê–ù–ò–ï –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
```

#### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã - –ø–æ—Å–ª–µ:**
```python
# ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
def remove_script(self, script_name):
    # –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ ID –∏ –∏–º–µ–Ω–∏
    api.write_sentence(["/system/script/print", 
                       "=.proplist=.id,name", 
                       f"?name={script_name}"])
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ ID –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
    script_id = self.extract_script_id(response)
    
    # –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ ID
    api.write_sentence(["/system/script/remove", f"=.id={script_id}"])
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
    return self.wait_for_script_removal(script_name)
```

---

## üìà –ò–∑–º–µ—Ä–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚è±Ô∏è **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π:**

| –û–ø–µ—Ä–∞—Ü–∏—è | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|----------------|-------------------|-----------|
| –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ | –ó–∞–≤–∏—Å–∞–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö | <1 —Å–µ–∫ | ‚àû |
| –£–¥–∞–ª–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ | 30+ —Å–µ–∫ (—á–∞—Å—Ç–æ timeout) | 3-5 —Å–µ–∫ | 85-90% |
| –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ scheduler | 30 —Å–µ–∫ —Å—Ç–∞—Ç–∏—á–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ | 5-15 —Å–µ–∫ –∞–∫—Ç–∏–≤–Ω–æ–µ | 50-75% |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π | –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ | 100% |

### üî¢ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π |
|---------|----------------|-------------------|
| –ü–æ–∫–∞–∑ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ | 11 –∏–∑ 15 (73%) | 15 –∏–∑ 15 (100%) |
| –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ | 20-30% | 100% |
| Timeout –æ—à–∏–±–∫–∏ | –ß–∞—Å—Ç–æ | –ù–∏–∫–æ–≥–¥–∞ |
| –õ–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ "–Ω–µ –Ω–∞–π–¥–µ–Ω–æ" | –†–µ–≥—É–ª—è—Ä–Ω–æ | –ù–∏–∫–æ–≥–¥–∞ |

---

## üîß –ü—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–µ—à–µ–Ω–∏—è

### 1Ô∏è‚É£ **Selective Field Request Pattern**
```python
# –ü—Ä–∏–Ω—Ü–∏–ø: –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è
"=.proplist=.id,name,run-count"  # –í–º–µ—Å—Ç–æ –≤—Å–µ—Ö –ø–æ–ª–µ–π
```

### 2Ô∏è‚É£ **Smart Reconnect Pattern**  
```python
# –ü—Ä–∏–Ω—Ü–∏–ø: –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
def reconnect_for_fresh_data(self):
    self.disconnect() ‚Üí self.connect() ‚Üí self.login()
```

### 3Ô∏è‚É£ **Progressive Waiting Pattern**
```python
# –ü—Ä–∏–Ω—Ü–∏–ø: –∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è
for attempt in range(max_attempts):
    if check_condition(): return True
    time.sleep(1)
```

### 4Ô∏è‚É£ **Graceful Degradation Pattern**
```python
# –ü—Ä–∏–Ω—Ü–∏–ø: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
try:
    operation()
except Exception as e:
    log_error(e)
    return fallback_result()
```

---

## üéØ –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **Selective field requests** —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- **Smart reconnect** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö  
- **Progressive waiting** —É—Å–∫–æ—Ä—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ 2-10 —Ä–∞–∑
- **Unified architecture** —É–ø—Ä–æ—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É

### üö´ **–ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å:**
- –ó–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—è `source` –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –°—Ç–∞—Ç–∏—á–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ `time.sleep(30)`
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–æ—Å–ª–µ async –æ–ø–µ—Ä–∞—Ü–∏–π
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### üîÆ **–ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å invalidation –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- Websocket API –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–µ—Å–ª–∏ RouterOS –ø–æ–¥–¥–µ—Ä–∂–∏—Ç)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö —Ç–∞–π–º–∞—É—Ç–æ–≤

---

**üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞ MikrotikUploader GUI —Å—Ç–∞–ª–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º —Å —Ä–µ—à–µ–Ω–∏–µ–º –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º RouterOS API! 